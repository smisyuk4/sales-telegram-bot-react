import{r as a,j as e}from"./index-6e6d1792.js";import{u as M,a as _,L as v,A as D,F as G,M as N,C as P,b as x,I as U,E as S,T as $,c as q,B as H,o as J,d as X,s as z,e as K}from"./SaleForm.styled-bbcd2790.js";import{R as Q}from"./Ruls-5534b0bf.js";import"./emotion-styled.browser.esm-2ffd868c.js";import"./mixins-1e7646ac.js";const W={isAccept:!1,title:"",description:"",contact:""},Y={headers:{"Content-Type":"application/json"}},Z=()=>{var m,p;const{register:o,handleSubmit:j,getValues:g,setValue:f,reset:y,formState:{errors:t,isValid:C}}=M({defaultValues:W,resolver:J(K),mode:"onChange"}),[l,i]=a.useState(0),[I,A]=a.useState(!1),[L,d]=a.useState(g("isAccept")),{user:b,onClose:E,queryId:T}=_(),[k,r]=a.useState(!1),[F,u]=a.useState(!1),R=({target:s})=>{const n=X-s.value.length;i(c=>n)},B=()=>{f("contact",`@${b}`,{shouldValidate:!0})},h=()=>{A(s=>!s)},V=async s=>{r(!0);const n=JSON.stringify({...s,queryId:T});try{if(await z("/web-data",n,Y)){u(!0),E(),y(),d(!1),r(!1),i(0);const O=setTimeout(()=>{u(!1),clearTimeout(O)},1500);return}}catch(c){alert(`error ==> ${c.message}`),r(!1)}},w=s=>{console.log("form onErrors",s)};return e.jsxs(e.Fragment,{children:[k&&e.jsx(v,{}),F&&e.jsx(D,{text:"Ваше оголошення відправлено"}),e.jsxs(G,{onSubmit:j(V,w),children:[I&&e.jsx(N,{toggleRulsModal:h,children:e.jsx(Q,{})}),e.jsx(P,{register:o,setIsChecked:d,isChecked:L,toggleRulsModal:h,errors:t}),e.jsxs(x,{children:[e.jsx("h2",{children:"Заголовок"}),e.jsx(U,{...o("title"),placeholder:"Куплю Iphone 12 256 GB"}),e.jsx(S,{children:(m=t.title)==null?void 0:m.message})]}),e.jsxs(x,{children:[e.jsx("h2",{children:"Опис товару"}),l>0&&e.jsxs("p",{children:["до ",l," символів"]}),e.jsx($,{...o("description",{onChange:s=>R(s)}),rows:"4",cols:"50",placeholder:"Колір чорний, памʼять 256 GB..."}),e.jsx(S,{children:(p=t.description)==null?void 0:p.message})]}),e.jsx(q,{register:o,setContact:B,errors:t}),e.jsx(H,{disabled:!C&&!t,type:"submit","aria-label":"Send",children:"Відправити"})]})]})},re=()=>e.jsx(Z,{});export{re as default};
